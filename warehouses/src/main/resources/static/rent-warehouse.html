<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Create client form</title>
</head>
<body>

<form id="myForm" action="http://localhost:8080/api/main/agents/rent-warehouse" method="post">
  <label for="ownerId">ownerId:</label>
  <input type="text" id="ownerId" th:name="ownerId" name="ownerId" value="2"><br><br>
  <label for="agentId">agentId:</label>
  <input type="text" id="agentId" th:name="agentId" name="agentId" value="4"><br><br>
  <label for="clientId">clientId:</label>
  <input type="text" id="clientId" th:name="clientId" name="clientId" value="3"><br><br>
  <label for="warehouseId">warehouseId:</label>
  <input type="text" id="warehouseId" th:name="warehouseId" name="warehouseId" value="2"><br><br>
  <label for="startDate">startDate:</label>
  <input type="text" id="startDate" th:name="startDate" name="startDate" value="2019-01-13"><br><br>
  <label for="endDate">endDate:</label>
  <input type="text" id="endDate" th:name="endDate" name="endDate" value="2023-01-13"><br><br>
  <label for="contractFiatWorth">ContractTotal:</label>
  <input type="text" id="contractFiatWorth" th:name="contractFiatWorth" name="contractFiatWorth" value="5499"><br><br>
  <label for="agentFee">agentFee:</label>
  <input type="text" id="agentFee" th:name="agentFee" name="agentFee" value="2.5"><br><br>
  <input type="submit" onclick="fetchData()"  value="submit">
</form>

  <script>
    /// basically try to send a new response until we get x code / returned value that's not null then stop
    // sending requests, and that's after we receive a first succesful request.
    document.getElementById("myForm").addEventListener("submit", function(event) {
      // Prevent the default form submission behavior
      event.preventDefault();
    function fetchData(){
      const response = fetch("http://localhost:8080/api/main/rentwarehouse");
      let stat;
      response.then(s => stat = s.status)
      while(stat<300 && stat>200){
        setTimeout(poll,1000)
      }
    }

    function poll(){
      let owner = document.querySelector("#ownerId");
      let agent = document.querySelector("#agentId");
      const response = fetch("http://localhost:8080/api/main/test");
      return
    }
  </script>


</body>
</html>